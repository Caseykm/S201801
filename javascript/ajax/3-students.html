<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Students</title>
    <body>
      <ul></ul>
      <hr>
      <form>
        <input name="student[name]" type="text" placeholder="Name">
      </form>

      <script>
        // Let's make student a proper 'class'!
        function Student() {
        }

        // Instantiate students into an array 'students' hanging off a
        // well-know repository (i.e. 'window')
        const students = []
        const form = document.querySelector('form')
        const nameInput = form.querySelector('input')
        const ul = document.querySelector('ul')

        form.addEventListener('submit', function(event) {
          event.preventDefault()
          // Learn the DOM via logging to the console...
          console.dir(nameInput)
          console.log(nameInput.constructor.name)
          console.log(nameInput.value)
          const names = nameInput.value.split(' ')
          addStudent({ first_name: names[0], last_name: names[1] })
        })

        addStudent = (student) => {
          const li = document.createElement('li')
          const text = student.first_name + " " + student.last_name
          const textNode = document.createTextNode(text)
          li.appendChild(textNode)
          ul.appendChild(li)
        }

        document.addEventListener('DOMContentLoaded', function () {
          fetch('http://localhost:3000/students.json')
            .then(resp => resp.json())
            .then(students => students.forEach(student => addStudent(student)))
        })
      </script>
    </body>
  </head>
</html>
